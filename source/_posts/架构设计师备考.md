---
title: 架构设计师备考
date: 2021-07-22 20:25:44
categories:
    - 软考
copyright: true
tags:
description: 软考备考
---

# 软考备考

![知识点分布](架构设计师备考/知识点分布.png)

## 计算机组成与体系结构

### Flynn分类法

|体系结构类型|结构|关键特性|代表|
|:--:|:--:|:--:|:--:|:--:|
|单指令流单数据流(SISD)|控制部分:一个<br>处理器:一个<br>主存模块:一个||单处理器系统|
|单指令流多数据流(SIMD)|控制部分:一个<br>处理器:多个<br>主存模块:多个|各处理器以异步的形式执行同一条指令|并行处理机<br><font color="red">阵列处理机</font><br>超级向量处理机|
|多指令流单数据流(MISD)|控制部分:多个<br>处理器:一个<br>主存模块:多个|被证明不可能，至少是不实际|目前没有，有文献称流水线计算机为此类|
|多指令多数据流(MIMD)|控制部分:多个<br>处理器:多个<br>主存模块:多个|能够实现作业、任务、指令等各级全面并行|多处理机系统<br>多计算机|

* 阵列处理机：适合数组类的运算，比如二维数组

### CISC与RISC

|指令系统类型|指令|寻址方式|实现方式|其它|
|:--:|:--:|:--:|:--:|:--:|
|CISC(复杂)|数量多，使用频率差别大，可变长格式|支持多种|微程序控制技术(微码)|研制周期长|
|RISC(精简)|数量少，使用频率接近，订长格式，大部分为单周期指令，操作寄存器，只有Load/Store操作内存|支持方式少|增加了通用寄存器；硬布线逻辑控制为主；适合采用流水线|优化编译，有效支持高级语言|

### 流水线

### 存储系统

![层次化存储结构](架构设计师备考/层次化存储结构.png)

#### Cache

> 提高CPU数据输入输出的速率，突破冯·诺伊曼瓶颈，即CPU与存储系统间数据传送贷款的限制

* 在计算机存储系统体系中，Cache是访问速度最快的层次(因寄存器在CPU中，大多数时候未将寄存器放在存储体系中讨论，<font color="red">最快的有寄存器选寄存器，没有选Cache</font>)
* 使用Cache改善性能的依据是程序的局部性原理

如果以$h$代表对Cache的访问命中率，$t_1$表示Cache的周期时间，$t_2$表示主存储器周期时间，以读操作为例，使用“Cache+主存储器”的系统的平均周期为$t_3$，则:
$$t_3=h\times t_1 +(1-h)\times t_2$$
其中，$(1-h)$又称为失效率(未命中率)

#### 局部性原理

* 时间局部性
* 空间局部性
* 工作集理论：工作集是进程运行时被频繁访问的页面集合

#### 主存

##### 分类

* 随机存取存储器:掉电信息丢失
  * DRAM(Dynamic RAM, 动态RAM) -SDRAM
  * SRAM(Static RAM, 静态RAM)


* 只读存储器:掉电信息不丢失
  * MROM(Mask ROM，掩模式ROM)
  * PROM(Programmable ROM，一次可编程ROM)
  * EPROM(Erasable PROM，可擦除的PROM)
  * 闪速存储器(flash memory，闪存)

##### 编址

![主存编制]（架构设计师备考//主存编制.png）

#### 例题
内存地址从AC000H到C7FFFH，共有_K个地址单元，如果该内存地址按字(16bit)编址，由28片存储器芯片构成。已知构成此内存的芯片每片由16K个存储单元，则该芯片每个存储单元存储_位[^1]

#### 磁盘结构与参数
> 存取时间=寻道时间+等待时间(平均定位时间+转动延迟)
*寻道时间指磁头移动到磁道所需的时间；等待时间为等待读写的扇区转到磁头下方所用的时间*

#### 例题
![磁盘例题](架构设计师备考/磁盘例题.png)[^2]
### 校验码
### 并行处理

## 系统配置与性能评价

### 性能指标
* 字长和数据通路宽度
* 主存容量和存取速度
* 运算速度
  * 主频与CPU时钟周期
  * CPI与IPC
  * MIPS与MFLOPS
    > $$MIPS = 指令条数/(执行时间\times 10^6)=主频/CPI=主频\times IPC$$
    > $$MFLOPS = 浮点操作次数/(执行时间\times 10^6)$$

* 吞吐量与吞吐率
* 响应时间与完成时间
* 兼容性
### 阿姆达尔解决方案

对系统中某组件采用某种更快的执行方式，所获得的系统性能的改变程度，取决于该组件被使用的频率，或所占总执行时间的比例。加速比计算公式如下：
$$R=\frac{T_p}{T_i}=\frac{1}{(1-F_e)+F_e/S_e}$$
其中，$T_p$表示不使用改进组件时完成整个任务的时间，$T_i$表示使用改进组件时完成整个任务的时间。
加速比主要取决于两个因素：
* 在原有的系统上，能被改进的部分在总执行时间中所占的比例。这个值称为改进比例，记为$F_e$，它总小于1
* 通过改进的执行方式所取得的性能提高，即如果整个系统使用了改进的执行方式，那么系统的执行速度会有多少提高，这个值等于在原来条件下系统执行时间与使用改进组件后系统的执行时间之比，记为$S_e$，它总大于1

#### 例题

在计算机系统中，某一功能的处理时间为整个系统运行时间的50%，若使该功能的处理速度加快10倍，根据Amdahl定律，这样做可以使整个系统的性能提高_倍。若要使整个系统的性能提高1.5倍，则该功能的处理速度应加快__倍。[^3]

### 性能评价方法
* 时钟频率法
> CPU、片面性极大，早期方式
* 指令执行速度法
> 单位时间执行指令数，片面性大(只衡量加法指令)
* 等效指令速度法(吉普森混合法)
> 每条指令使用概率乘以每条指令执行时间，相当于取平均值，依然局限在运算能力
* 数据处理速率法(PDR)
> 会考虑存储交互性
* 综合理论性能法(CTP)
> 考虑每一个处理部件、计算单元的有效计算率，根据字长调整，比较平衡地取得每个计算单位理论的性能值
* 基准程序法
  * Dhrystone基准程序
  * Linpack基准程序
  * Whetstone基准程序
  * SPEC基准程序(SPECmark、SPECint、SPECfp、SPECrate)
  * TPC基准程序
    * TPC-A：OLTP环境下的数据库和硬件性能
    * TPC-B：不包括网络的纯事务处理，模拟企业计算环境
    * TPC-C：联机订货系统
    * TPC-D、TPC-H、TPC-R：决策支持系统
    * TPC-E：大型企业信息服务系统
    * TPC-W：通过Internet进行市场服务和销售的商业行为

### 性能检测方法

* 软件监控：使用软件对系统性能数据进行采集分析，此方法会消耗较多的系统资源
* 硬件监控：使用专用硬件设备对系统性能进行采集分析，适用于高负载的计算机系统 

## 操作系统基本原理

### 进程管理
* 状态
![进程的状态](架构设计师备考/进程的状态.png)

* 前趋图
![前趋图](架构设计师备考/前趋图.png)
> 考虑哪些有先后，哪些可并行。前趋图描述一系列活动的先后约束关系。

* 同步与互斥
互斥：在同一时刻只允许一个进程使用一个资源
同步：速度有差异，在一定情况下等待
![生产者消费者问题](架构设计师备考/生产者消费者问题.png)

* PV 操作
> 临界资源：诸进程间需要互斥方式对其进行共享的资源，如打印机、磁带机等
> 临界区：每个进程中访问临界资源的那段代码称为临界区
> 信号量：一种特殊的变量(控制临界资源是否能够访问，为1其实就是锁)

![PV操作](架构设计师备考/PV操作.png)

单缓冲区生产者、消费者问题PV原语描述，S1初始值为1，S2初始值为0
```
生产者:
    生产一个产品;
    P(S1);
    送产品到缓冲区;
    V(S2);

消费者:
    P(S2);
    从缓冲区取产品;
    V(S1);
    消费产品;
```
* PV操作与前趋图结合
![PV和前趋图结合](架构设计师备考/PV和前趋图结合.png)

* 死锁问题
>一个进程等待一件不可能发生的事，则进程死锁。如果一个或多个进程产生死锁，就会造成系统死锁
四大条件：环路等待、互斥、保持和等待、不剥夺
死锁的预防：打破四大条件
死锁的避免：有序资源分配法、<font color="red">银行家算法</font>

* 银行家算法
> 当一个进程对资源的最大需求量不超过系统的资源数时可以接纳该进程
> 进程可以分期请求资源，但请求的总数不能超过最大需求量
> 当系统现有的资源不能满足进程尚需资源数时，对进程的请求可以推迟分配，但总能使进程在有限的时间里得到资源

![死锁问题](架构设计师备考/死锁问题.png)
#### 例题
* 例题1[^4]
![PV例题1](架构设计师备考/PV例题1.png)
* 例题2[^5]
![PV例题2](架构设计师备考/PV例题2.png)
* 例题3[^6]
![PV例题3](架构设计师备考/PV例题3.png)
* 例题4[^7]
系统有3个进程，A、B、C。这3个进程都需要5个系统资源。则系统至少有多少个资源不可能发生死锁。
* 例题5[^8]
![银行家算法](架构设计师备考/银行家算法.png)

### 存储管理
#### 页式存储
![页式存储](架构设计师备考/页式存储.png)
* 优点：利用率高，碎片小，分配及管理简单
* 缺点：增加了系统开销(查表)；可能产生抖动现象

#### 段式存储
![段式存储](架构设计师备考/段式存储.png)

#### 段页式存储
![段页式存储](架构设计师备考/段页式存储.png)
* 优点：空间浪费小，存储共享容易，存储保护容易，能动态链接
* 缺点：由于管理软件的增加，复杂性和开销也随之增加，需要的硬件以及占用的内容也有所增加，使得执行速度大大下降

#### 快表
快表是一块小容量的相联存储器(Associative Memory)，由高速缓存器组成，速度快，并且可以从硬件上保证按内容并行查找，一般用来存放当前访问最频繁的少数活动页面的页号。

#### 页面置换算法
* 最优(Optimal,OPT)算法
* 随机(RAND)算法
* <font color="red">先进先出(FIFO)算法</font>：有可能产生抖动。例如432143543215序列，用3个页面，比4个缺页要少
![FIFO算法](架构设计师备考/FIFO算法.png)
* <font color="red">最近最少使用(LRU)算法</font>：不会抖动
#### 例题
* 例题1[^9]
![页式存储例题](架构设计师备考/页式存储例题.png)
* 例题2[^10]
![页面置换算法例题](架构设计师备考/页面置换算法例题.png)
* 例题3[^11]
![页面置换例题2](架构设计师备考/页面置换例题2.png)

### 文件管理
#### 索引文件结构
![索引文件结构](架构设计师备考/索引文件结构.png)

####  文件系统和树型目录结构
* 文件属性:只读文件属性(R)、存档属性(A)、系统文件(S)、隐藏文件(H)
* 文件名组成:驱动器号、路径、主文件名、扩展名
* <font color="red">绝对路径:是从盘符开始的路径</font>
* <font color="red">相对路径:是从当前路径开始的路径</font>
![树型目录结构](架构设计师备考/树型目录结构.png)
若当前路径为D1，要求F2路径，则绝对路径为：/D1/W2/F2，相对路径：W2/F2

#### 空闲存储空间的管理
* 空闲区表法(空闲文件目录)
* 空闲链表法
* <font color="red">位示图法</font>
* 成组连接法
![位示图法](架构设计师备考/位示图法.png)
#### 例题
* 例题1[^12]
![索引文件结构例题1](架构设计师备考/索引文件结构例题1.png)

* 例题2[^13]
![位示图例题](架构设计师备考/位示图例题.png)

### 设备管理
#### 数据传输控制方式
*  <font color="red">程序控制方式</font>（程序查询方式）：最低级的，CPU介入最多--查询，外设处于被动
*  <font color="red">程序中断方式</font>：外设可以主动触发，效率更高
*  <font color="red">DMA方式</font>(直接存取控制方式)：由专门的DMA控制器控制外设与内存的数据交换
* 通道
* 输入输出处理机

### 微内核操作系统
||实质|优点|缺点|
|:--:|:--:|:--:|:--:|
|单体内核|将图形、设备驱动及文件系统等功能全部在内核中实现，运行在内核状态和同一地址空间|减少进程间通信和状态切换的系统开销，获得较高的运行效率|内核庞大，占用资源较多且不易裁剪<br/>系统的稳定性和安全性不好|
|微内核|只实现基本功能，将图形系统、文件系统、设备驱动及通信功能放在内核之外|内核精炼，便于裁剪和移植<br/>系统服务程序运行在用户地址空间，系统的可靠性、稳定性和安全性较高<br/>可用于分布式系统|用户状态和内核状态需要频繁切换，从而导致系统效率不如单体内核|
![微内核操作系统](架构设计师备考/微内核操作系统.png)

## 数据库系统
### 三级模式-两级映射
![三级模式两级映射](架构设计师备考/三级模式两级映射.png)

### 数据库设计过程
![数据库设计过程](架构设计师备考/数据库设计过程.png)

### E-R模型
![ER模型](架构设计师备考/ER模型.png)

* 集成的方法
  1. 多个局部E-R图一次集成
  2. 逐步集成，用累加的方式一次集成两个局部E-R
* 集成产生的冲突及解决方法
  1. 属性冲突：包括属性域冲突和属性取值冲突
  2. 命名冲突：包括同名异义和异名同义
  3. 结构冲突：包括同一对象在不同应用中具有不同的抽象，以及同一实体在不同局部E-R图中所包含的属性个数和属性排列次序不完全相同
* E-R模型转关系模式
  1. 一个实体转换为一个关系模式
  2. 1:1联系：最少可以转成2个关系模式，一个实体对应一个关系模式，将联系放入任何一个实体都可
  3. 1:n联系：最少可以转成2个关系模式，一个实体对应一个关系模式，可以把联系记录在n的一端
  4. m:n联系： 最少可以转成3个关系模式，一个实体对应一个关系模式，联系需要一个单独的关系模式记录

#### 例题
* 例题1[^14]
![E-R模型转换](架构设计师备考/E-R模型转换.png)

### 关系代数
> 并、交、差、<font color="red">笛卡尔积、投影、选择、联结</font>

* 交并差
![关系1](架构设计师备考/关系1.png)
![交](架构设计师备考/交.png)
![并](架构设计师备考/并.png)
![差](架构设计师备考/差.png)

* 笛卡尔积、投影、选择
![关系1](架构设计师备考/关系1.png)
![笛卡尔积](架构设计师备考/笛卡尔积.png)
![投影](架构设计师备考/投影.png)
![选择](架构设计师备考/选择.png)

* 联结
![关系2](架构设计师备考/关系2.png)
![联结](架构设计师备考/联结.png)

### 规范化理论
> 价值与用途：非规范化的关系模式，可能存在的问题包括：数据冗余，更新异常、插入异常、删除异常

#### 函数依赖
>设R(U)是属性U上的一个关系模式，X和Y是U的子集，r为R的任一关系，如果对于r中的任意两个元组u，v，只要有$u[X]=v[X]$，就有$u[Y]=v[Y]$,则称X函数决定Y，或称Y函数依赖于X，记为$X\rightarrow Y$

![部分函数依赖](架构设计师备考/部分函数依赖.png)
![传递函数依赖](架构设计师备考/传递函数依赖.png)

#### 键
![键](架构设计师备考/键.png)
* 求解候选键
  1. 将关系模式的函数依赖关系用“有向图”的方式表示
  2. 找入度为0的属性，并以该属性集合为起点，尝试遍历有向图，若能正常遍历图中所有结点，则该属性集即为关系模式的候选键
  3. 若入度为0的属性不能遍历图中所有结点，则需要尝试性地将一些中间结点(即有入度，也有出度的结点)并入入度为0的属性集中，直至该集合能遍历所有结点，集合为候选键

##### 例题
* 例题1[^15]
![键例题1](架构设计师备考/键例题1.png)
* 例题2[^16]
![键例题2](架构设计师备考/键例题2.png)
* 例题3[^17]
![键例题3](架构设计师备考/键例题3.png)

#### 范式
![范式](架构设计师备考/范式.png)

* 第一范式(1NF)：在关系模式R中，当且仅当所有域只包含原子值，即每个分量都是不可再分的数据项，则陈R是第一范式
* 第二范式(2NF)：当且仅当R是第一范式，且第一个非主属性完全依赖主键(<font color="red">不存在部分依赖</font>)时，则称R是第二范式
* 第三范式(3NF)：当且仅当R是1NF，且E中没有非主属性传递依赖的码时，则称R是第三范式
* BC范式(BCNF)：设R是一个关系模式，F是它的依赖集，R属于BCNF当且仅当其F中每个依赖的决定因素必定包含R的某个候选码

##### 例题
* 例题1[^18]
![范式例题1](架构设计师备考/范式例题1.png)

#### 模式分解
* <font color="red">保持函数依赖分解</font>
> 设数据库模式$\sigma = \{R1,R2,\dots,Rk\}$是关系模式R的一个分解，F是R上的函数依赖集，$\sigma$中每个模式Ri上的FD集是Fi。如果$\{F1,F2,\dots,Fk\}$与F是等价的(即相互逻辑蕴涵)，那么称分解$\sigma$保持FD。
* 无损分解
> 有损即不能还原，无损即可以还原

* 无损联接分解
>指将一个关系模式分解成若干个关系模式后，通过自然联接和投影等运算仍能还原到原来的关系模式。

定理：如果R的分解为$\sigma={R_1,R_2}$，F为R所满足的函数依赖集合，分解$\sigma$具有无损联接性的充分必要条件是：
$$R_1\cap R_2 \rightarrow (R_1-R_2)$$
或
$$R_1 \cap R_2 \rightarrow (R_2-R_1)$$
其中，$R_1\cap R_2 $表示模式的交，为$R_1$与$R_2$中公共属性组成，$R_1-R_2$或$R_2-R_1$表示模式的差集，$R_1-R_2$表示$R_1$中去除$R_1$和$R_2$的公共属性所组成。当模式R分解成两个关系模式$R_1$和$R_2$时，如果$R_1$与$R_2$的公共属性能函数决定$R_1$中或$R_2$中的其它属性，这样的分解就具有无损联接性。(<font color="red">只适用于一分为二的分解</font>)

##### 例题
* 例题1[^19]
![模式分解例题1](架构设计师备考/模式分解例题1.png)

* 例题2[^20]
![模式分解例题2](架构设计师备考/模式分解例题2.png)

### 并发控制
![并发控制](架构设计师备考/并发控制.png)

* 并发存在的问题
![并发存在的问题](架构设计师备考/并发存在的问题.png)

#### 封锁协议
* 一级封锁协议。事务T在修改数据R之前必须先对其加X锁，直到事务结束才释放。<font color="red">可防止丢失修改</font>
* 二级封锁协议。一级封锁协议加上事务T在读取数据R之前先对其加S锁，读完后即可释放S锁。<font color="red">可防止丢失修改，还可防止读“脏”数据</font>
* 三级封锁协议。一级封锁协议加上事务T在读取数据R之前先对其加S锁，直到事务结束才释放。<font color="red">可防止丢失修改，防止读“脏”数据与防止数据重复读</font>
* 两阶段协议。可串行化，可能发生死锁

### 数据库完整性约束
* 实体完整性约束：给数据表定义主键，约束的是主键的值不能为空和重复
* 参照完整性约束：外键完整性约束，允许为空
* 用户自定义完整性约束：可以设置属性值的要求
触发器：应对复杂的完整性约束，通过脚本约束一些复杂要求。上诉三种只能应付简单的要求。

### 数据库安全
|措施|说明|
|:--:|:--:|
|用户标识和鉴定|最外层的安全保护措施，可以使用用户账户、口令及随机数检验等方式|
|存取控制|对用户进行授权，包括操作类型（如查找、插入、删除、修改等动作）和数据对象（主要是数据范围）的权限|
|密码存储和传输|对远程终端信息用密码传输|
|视图的保护|对视图进行授权|
|审计|使用一个专用文件或数据库，自动将用户对数据库的所有操作记录下来|

### 数据备份

* 冷备份：也称静态备份，是将数据库正常关闭，在停止状态下，将数据库的文件全部备份(复制)下来
* 热备份：也称为动态备份，是利用备份软件，在数据库正常运行的状态下，将数据库中的数据文件备份出来

|备份方式|优点|缺点|
|:--:|:--|:--|
|冷备份|非常快速的备份方法(只需复制文件)；<br/>容易归档(简单复制即可)；<br/>容易恢复到某个时间点上(只需将文件再复制回去)；<br/>能与归档方法相结合，做数据库“最佳状态”的恢复；<br/>低度维护，高度安全|单独使用时，只能提供到某一时间点上的恢复；<br/>在实施备份的全过程中，数据库必须要作备份而不能做其它工作；<br/>若磁盘空间有限只能复制到磁带等其它外部存储设备上，速度会很慢；<br/>不能按表或按用户恢复|
|热备份|可在表空间或数据库文件级备份，备份时间短；<br/>备份时数据库仍可使用；<br/>可达到秒级恢复(恢复到某一时间点上)；<br/>可对几乎所有数据库实体做恢复；<br/>恢复是快速的|不能出错，否则后果严重；<br/>若热备份不成功所得结果不可用于时间点的恢复；<br>困难于维护，所以特别小心，不允许"以失败告终"|

* 完全备份：备份所有数据
* <font color="red">差量备份：仅备份上一次完全备份之后变化的数据</font>
* 增量备份：备份上一次备份之后变化的数据

#### 转储
* 静态海量转储：在系统中无运行事务时进行，每次转储全部数据库
* 静态增量转储：在系统中无运行事务时进行，每次只转储上一次转储后更新过的数据
* 动态海量转储：转储期间允许对数据库进行存取或修改，每次转储全部数据库
* 动态增量转储：转储期间允许对数据库进行存取和修改，每次只转储上一次转储后更新过的数据。

日志文件：事务日志是针对数据库改变所做的记录，它可以记录针对数据库的任何操作，并将记录结果保存在独立的文件中

### 数据库故障与恢复
|故障关系|故障原因|解决方法|
|:--:|:--:|:--:|
|事务本身的可预期故障|本身逻辑|在程序中预先设置RollBack语句|
|事务本身的不可预期故障|算术溢出、违反存储保护|由DBMS的恢复子系统通过日志，撤销事务对数据库的修改，回退到事务初始状态|
|系统故障|系统停止运转|通常使用检查点法|
|介质故障|外存被破坏|一般使用日志重做业务|

### 分布式数据库
![分布式数据库](架构设计师备考/分布式数据库.png)
* 分布透明性
  * 分片透明性
    * 水平分片
    * 垂直分片
    * 混合分片
  * 位置透明性
  * 局部数据模型透明性
* 分布式数据库管理系统-组成
  * LDBMS
  * GDBMS
  * 全局数据字典
  * 通信管理(CM)
* 分布式数据库管理系统-结构
  * 全局控制集中的DDBMS
  * 全局控制分散的DDBMS
  * 全局控制部分分散的DDBMS

### 数据库优化
![数据库优化](架构设计师备考/数据库优化.png)

### 数据仓库与数据挖掘
* 面向主题
* 集成的
* 相对稳定的(非易失的)
* 反映历史变化
![数据仓库](架构设计师备考/数据仓库.png)

#### 数据挖掘方法分类
* 方法
  * 决策树
  * 神经网络
  * 遗传算法
  * 关联规则挖掘算法
* 分类
  * 关联分析：挖掘出隐藏在数据间的相互关系
  * 序列模式分析：侧重点是分析数据间的前后关系(因果关系)
  * 分类分析：为每一个记录赋予一个标记再按标记分类
  * 聚类分析：分类分析法的逆过程
  
### 联邦数据库
>联邦数据库系统(FDBS)是一个彼此协作却又相互独立的成员数据库(CDBS)的集合，它将成员数据库系统按不同程度进行集成，对该系统整体提供控制和协同操作的软件叫做联邦数据库管理系统(FDBMS)
* 联邦数据库特征
  * 分布性
  * 异构性
  * 自治性
  * 透明性
* 联邦数据库分类
  * 紧耦合
  * 松耦合

### NoSQL
||关系数据库模式|NoSQL模式|
|:--:|:--:|:--|
|并发支持|支持并发、效率低|并发性能高|
|存储与查询|关系表方式存储、SQL查询|海量数据存储、查询效率高|
|扩展方式|向上扩展，升级服务器|向外扩展，扩展集群|
|索引方式|B树、哈希等|键值索引|
|应用领域|面向通用领域|特定应用领域|

* 缺点(存疑，目前已经算是比较成熟)
* 成熟度不够，大量关键特性有待实现
* 开源数据库产品的支持力度有限
* 数据挖掘与商务智能支持不足，现有的产品无法直接使用NoSQL数据库
* NoSQL数据库专家较少，大部分都处于学习阶段
> SQL + NoSQL = MoreSQL/NewSQL

*Redis、MongoDB、Flare...*

### 反规划化
> 由于规范化会使表不断地拆分，从而导致数据表过多。这样虽然减少了数据冗余，提高了增、删、改的速度，但会增加查询的工作量。系统需要进行多次连接，才能进行查询操作，使得系统效率大大下降。

* 技术手段
  * 增加派生性冗余列
  * 增加冗余列
  * 重新组表
  * 分割表

### 大数据基本概念
> 数据量(Volume)、速度(Velocity)、多样性(Variety)、值(Value)

|比较纬度|传统数据|大数据|
|:--:|:--:|:--:|
|数据量|GB或TB级|PB级或以上|
|数据分析需求|现有数据的分析和检测|深度分析(关联分析、回归分析)|
|硬件平台|高端服务器|集群平台|

* <font color="red">大数据处理系统应具有的重要特性</font>
  * 高度可扩展性
  * 高性能
  * 高度容错
  * 支持异构环境
  * 较短的分析延迟
  * 易用且开放的接口
  * 较低成本
  * 向下兼容性

## 计算机网络
### OSI/RM七层模型
![七层模型](架构设计师备考/七层模型.png)
#### 例题
* 例题1[^21]
![七层模型例题1](架构设计师备考/七层模型例题1.png)

### 网络技术标准与协议
* TCP/IP协议：Internet，可扩展，可靠，应用最广，牺牲速度和效率
* IPX/SPX协议：NOVELL，路由，大型企业网
* NETBEUI协议：IBM，非路由，快速
![网络技术标准与协议](架构设计师备考/网络技术标准与协议.png)

* TCP
  * 三次握手
![三次握手](架构设计师备考/三次握手.png)
  * 可靠传输
![可靠传输](架构设计师备考/可靠传输.png)

* DHCP
  1. 客户机/服务器模型
  2. 租约默认为8天
  3. 当租约过半时，客户机需要向DHCP服务器申请续租
  4. 当租约超过87.5%时，如果仍然没有和当初提供IP的DHCP服务器联系上，则开始联系其他的DHCP服务器
  5. 固定分配、动态分配和自动分配
  6. 169.254.X.X（Windows）和0.0.0.0（Unix）说明未和DHCP服务器联系上

* DNS协议
  * 递归查询：服务器必须回答目标IP与域名的映射关系。<font color="red">主机向本地域名服务器的查询采用递归查询</font>
  * 迭代查询：服务器收到一次迭代查询回复一次结果，这个结果不一定是目标IP与域名的映射关系，也可以是其它DNS服务器的地址。<font color="red">本地域名服务器向根域名服务器的查询**通常采用**迭代查询</font>
![DNS查询](架构设计师备考/DNS查询.png)

#### 例题
* 例题1[^22]
![DNS例题.png](架构设计师备考/DNS例题.png)

### 网络规划与设计
* 网络规划原则
  * 实用性原则
  * 开放性原则
  * 先进性原则
* 网络设计任务
  * 确定网络总体目标
  * 确定总体设计原则
  * 通信子网设计
  * 资源子网设计
  * 设备选型
  * 网络操作系统与服务器资源设备
  * 网络安全设计
* 网络设计原则
  * 可用性：指网络或网络设备可用于执行预期任务时间所占总量的百分比
  * 可靠性：网络设备或计算机持续执行预定功能的可能性
  * 可恢复性：指网络从故障中恢复的难易程度和时间
  * 适应性：指在用户改变应用要求时网络的应变能力
  * 可伸缩性：指网络技术或设备随着用户需求的增长而扩充的能力
* 网络实施原则
  * 可靠性原则
  * 安全性原则
  * 高效性原则
  * 可扩展性原则
* 网络实施步骤
  * 工程实施计划
  * 网络设备到货验收
  * 设备安装
  * 系统测试
  * 系统试运行
  * 用户培训
  * 系统转换

#### 逻辑设计
> 利用需求分析和现有网络体系分析的结果来设计逻辑网络结构，最后得到一份逻辑网络设计文档
* 逻辑网络设计图
* IP地址方案
* 安全方案
* 具体的软硬件、广域网连接设备和基本服务
* 招聘和培训网络员工的具体说明
* 对软硬件、服务、员工和培训的费用初步估计

#### 物理网络设计
> 物理网络设计是对逻辑网络设计的物理实现，通过对设备的具体物理分布、运行环境等确定，确保网络的物理连接服务逻辑连接的要求
* 网络物理结构图和布线方案
* 设备和部件的详细列表清单
* 软硬件和安装费用的估算
* 安装日程表，详细说明服务的时间以及期限
* 安装后的测试计划
* 用户的培训计划

#### 分层设计
* 接入层：向本地网段提供用户接入
* 汇聚层：网络访问策略控制、数据包处理、过滤、寻址
* 核心层：数据交换

![网络分层设计](架构设计师备考/网络分层设计.png)

### 无线网
* 分类
  * 无线局域网(WLAN,802.11,WI-FI)
  * 无线城域网(WMAN,802.16,WiMax)
  * 无线广域网(WWAN,3G/4G)
  * 无线个人网(WPAN,802.15,Bluetooth)

* 优势
  * 移动性
  * 灵活性
  * 成本低
  * 容易扩充

* 无线局域网接入方式
  * 有接入点模式
  * 无接入点模式(对等模式)

### 网络接入技术
* 有限接入
  * 公用交换电话网络(PSTN)-(POS机，传真)
  * 数字数据网(DDN)
  * 综合业务数字网(ISDN)
  * 非对称数字用户线路(ADSL)-<font color="red">介质是电话线，上下行不等</font>
  * 同轴光纤技术(HFC)-<font color="red">有线电视网络</font>

* 无线接入
  * IEEE 802.11(WiFi)
  * IEEE 802.15(蓝牙Bluetooth)
  * 红外(IrDA)
  * WAPI

* 3G
  * WCDMA
  * CDMA2000
  * TD-SCDMA

* 4G
  * LET-Advanced
    * TDD(时分):由TD-SCDMA发展而来
    * FDD(频分):由WCDMA发展而来
  * WirelessMAN- Advanced(802.16m)(WiMAX)

### 网络存储技术
#### 分类
* 直连式存储(DAS)：服务器直接和存储相连，可以接磁盘阵列，最原始的一种方式，适用于数据量不大，业务不复杂的场景
![DAS](架构设计师备考/DAS.png)

* 网络附加存储(NAS)：存储附加于网络之上，<font color="red">即插即用的存储</font>，是一台存储服务器。<font color="red">网络在某些时间节点很繁忙，是由于NAS未将存储网络和业务网络分开导致</font>
![NAS](架构设计师备考/NAS.png)

* 存储区域网络(SAN)：将业务网络和存储网络完全分开，存储网络使用光纤网络，速率远高于IP网络，<font color="red">是首次提出业务网络和存储网络分开的技术</font>，性能卓越，<font color="red">缺点只有成本高</font>
![SAN](架构设计师备考/SAN.png)

* IPSAN(iSCSI)：SAN的廉价方案，性能比SAN低
![IPSAN](架构设计师备考/IPSAN.png)

#### Raid
* <font color="red">Raid0(条块化)</font>:性能最高，并行处理，无冗余，损坏无法恢复
* <font color="red">Raid1(镜像结构)</font>:可用性，可恢复性好，仅有50%利用率
![Raid](架构设计师备考/Raid.png)
> Raid0磁盘利用率为100&，访问速度最快。Raid1磁盘利用率为50%，具备纠错功能。现在企业采用Raid0+1

* <font color="red">Raid0+1(Raid10)</font>:Raid0与Raid1长处的结合，高效也可靠，利用率也只有50%
* Raid3(奇偶校验并行传送): N+1模式，有固定的校验盘，坏一个盘可恢复
* <font color="red">Raid5(分布式奇偶校验的**独立磁盘**)</font>: N+1模式，无固定的校验盘，坏一个盘可恢复(相比Raid3，优势在于降低整个系统的磁盘出错损坏的概率)
![Raid5](架构设计师备考/Raid5.png)
> Raid5磁盘利用率为(n-1)/n，具有容错功能

* Raid6(两种存储的奇偶校验):N+2模式，无固定的校验盘，坏两个盘可恢复

### IPv6
>IPv6是设计用于替代现行版本IP协议(IPv4)的下一代IP协议

* 特点
  * IPv6地址长度为128位，<font color="red">地址空间增大了$2^96$倍</font>
  * 灵活的IP报文头部格式。使用一系列固定格式的扩展头部取代了IPv4种可变长度的选项字段。IPv6中选项部分的出现方式也有所变化，是路由器可以简单路过选项而不做任何处理，加快了报文处理速度
  * IPv6简化了报文头部格式，字段只有8个，加快报文转发，提高了吞吐量
  * 提高安全性。身份认证和隐私权是IPv6的关键特性
  * 支持更多的服务类型
  * 允许协议继续演变，增加新的功能，使之适应未来技术的发展

* 地址分类
  * 单播地址(Unicast):用于单个接口的标识符
  * 任播地址(Anycast):泛播地址。一组接口的标识符，<font color="red">IPv4广播地址</font>
  * 组播地址(Multicast):IPv6的组播在功能上与IPv4中的组播类似

### 物联网
>物联网(The Internet of Things)是实现物物相连的互联网络，其内涵包含两个方面：第一，物联网的核心和基础仍然是互联网，是在互联网基础上延伸和扩展的网络；第二，其用户端延伸和扩展到了任何物体与物体之间，使其进行信息交换和通信

* 感知层：识别物体、采集信息。如：二维码、RFID、摄像头、传感器
* 网络层：传递信息和处理信息。通信网与互联网的融合网络、网络管理中心、信息中心和智能处理中心等
* 应用层：解决信息处理和人机交互的问题
![物联网分层](架构设计师备考/物联网分层.png)

* RFID
> 射频识别技术(Radio Frequency Identification,RFID)，又称电子标签，是一种通信技术，可通过无线电讯号识别特定目标并读写相关数据，而无需识别系统与特定目标之间建立机械或光学接触。该技术是物联网的一项核心技术，很多物联网应用都离不开它。

> RFID的基本组成部分通常包括：标签、阅读器、天线

* 二维码
>二维码是用某种特定的几何图形按一定规律在平面(二维方向上)分布的黑白相间的图形记录数据符号信息的。在代码编制上巧妙地利用构成计算机内部逻辑基础的0、1比特流的概念，使用若干个与二进制相对应的几何形体来表示文字数值信息，通过图像输入设备或光电扫描设备自动识读以实现信息自动处理
二维码常用的码制有：Data Matrix,Maxi Code,Aztec,QR Code,Vericode,PDF417,U1tacode,Code 49,Code 16k
  * PDF417
    * 若采用扩展的字母数字压缩格式，可容纳1850个字符
    * 若采用二进制/ASCII格式，可容纳1108个字节
    * 若采用数字压缩格式，可容纳2710个数字

* 传感网
> 传感网是由随机分布的，集成有传感器(传感器有很多种类型，包括：温度、湿度、速度、气敏等)、数据处理单元和通信单元单元的微小节点，通过自组织的方式构成无线网络

* M2M
> M2M是将数据从一台终端传送到另一台终端，也就是机器与机器(Machine to Machine)的对话。但从广义上M2M可代表机器对机器(Machine to Machine)、人对机器(Man to Machine)、机器对人(Machine to Man)、移动网络对机器(Mobile to Machine)之间的连接和通信，它涵盖了所有实现在人、机器、系统之间建立通信连接的技术和手段

![物联网核心技术](架构设计师备考/物联网核心技术.png)

### 云计算
> 云计算是一种基于互联网的计算方式，通过这种方式，共享的软硬件资源和信息可以按需提供给计算机和其它设备。云其实是网络、互联网的一种比喻说法。云计算的核心思想，是将大量用网络连接的计算资源统一管理和调度，构成一个计算资源池向用户按需服务。提供资源的网络被称为"云"。
* 狭义云计算指<font color="red">IT基础设施</font>的交付和使用模式，指通过网络以按需、易扩展的方式获取所需资源
* 广义云计算指<font color="red">服务</font>的交付和使用模式，指通过网络以按需、易扩展的方式获得所需服务。这种服务可以是IT和软件、互联网相关、也可是其他服务
* 特点
  * 集合了大量计算机，规模达到成千上万
  * 多种软硬件技术相结合
  * 对客户端设备的要求低
  * 规模化效应


* 类型
  * 软件即服务(SaaS)
  * 平台即服务(PaaS)
  * 基础设施即服务(IaaS)
![云计算服务类型](架构设计师备考/云计算服务类型.png)

* 应用
  * 存储服务
  * 搜索
  * 科学计算
  * 安全应用
  * 软件即服务


[^1]: 112、4
[^2]: C、B
[^3]: 1.8、3
[^4]: A、C
[^5]: C、A、A
[^6]: D、A、C
[^7]: 13，计算公式：a*(n-1)+1
[^8]: B
[^9]: D、B(访问位为1的不能淘汰，只能淘汰为0的)
[^10]: 12、5、9
[^11]: B、C(指令一次性读入，只产生一次缺页中断，数据跨页产生两次)
[^12]: C、D
[^13]: D($\frac{4195+1}{32}$)、B(第132字第0位置为：4192，第1位置：4193，第2位置：4194，第3位置：4195)，字从1开始算，位置从0开始算
[^14]: C
[^15]: A 
![键例题1图](架构设计师备考/键例题1图.png)
[^16]: ABCD 
![键例题2图](架构设计师备考/键例题2图.png)
[^17]: B 
![键例题3图](架构设计师备考/键例题3图.png)
[^18]: C、D、A
[^19]: 是![模式分解例题1答案](架构设计师备考/模式分解例题1答案.png)![模式分解例题1答案1](架构设计师备考/模式分解例题1答案1.png)![模式分解例题1答案2](架构设计师备考/模式分解例题1答案2.png)
[^20]: 是、否![模式分解例题2答案](架构设计师备考/模式分解例题2答案.png)
[^21]: B
[^22]: A