---
title: 网络编程(一)
date: 2018-02-22 15:53:42
categories: Python
copyright: true
tags:
    - Python
    - 网络编程
description:
---
使用Python的一些模块来创建网络应用程序
<!--More-->
## socket()函数模块
要创建套接字，必须使用`socket.socket()`函数`socket(socket_family, socket_type, protocol = 0)`,
其中`socket_family`是 *AF_UNIX* 或 *AF_INET*,`socket_type`是 *SOCK_STREAM* 或 *SOCK_DGRAM*。[^1]
`protocol`通常省略，默认为0。
1. >创建TCP/IP套接字
   ```Python
   tcpSock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
   ```
2. >创建UDP/IP套接字
   ```Python
   udpSock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
   ```

## 套接字对象内接方法
|         名称         |                                 描述                                  |
|:--------------------:|:---------------------------------------------------------------------:|
|   服务器套接字方法   |                                                                       |
|       s.bind()       |                将地址(主机名、端口号对)绑定到套接字上                 |
|      s.listen()      |                          设置并启动TCP监听器                          |
|      s.accept()      |           被动接受TCP客户端连接，一直等待知道连接到达(阻塞)           |
|   客户端套接字方法   |                                                                       |
|     s.connect()      |                         主动发起TCP服务器连接                         |
|    s.connect_ex()    | connect()的扩展版本，此时会以错误码的形式返回问题，而不是抛出一个异常 |
|   普通的套接字方法   |                                                                       |
|       s.recv()       |                              接受TCP消息                              |
|    s.recv_into()     |                       接受TCP消息到指定的缓冲区                       |
|       s.send()       |                              发送TCP消息                              |
|     s.sendall()      |                           完整地发送TCP消息                           |
|     s.recvfrom()     |                              接受UDP消息                              |
|  s.recvfrom_into()   |                       接受UDP消息到指定的缓冲区                       |
|      s.sendto()      |                              发送UDP消息                              |
|   s.getpeername()    |                      连接到套接字(TCP)的远程地址                      |
|   s.getsockname()    |                           当前套接字的地址                            |
|    s.getsockopt()    |                        返回给定套接字选项的值                         |
|    s.setsockopt()    |                        设置给定套接字选项的值                         |
|     s.shutdown()     |                               关闭连接                                |
|      s.close()       |                              关闭套接字                               |
|      s.detach()      |         在未关闭文件描述符的情况下关闭套接字，返回文件描述符          |
|      s.ioctl()       |                    控制套接字的模式(仅支持Windows)                    |
| 面向阻塞的套接字方法 |                                                                       |
|   s.setblocking()    |                     设置套接字的阻塞或非阻塞模式                      |
|    s.settimeout()    |                     设置阻塞套接字操作的超时时间                      |
|    s.gettimeout()    |                     获取阻塞套接字操作的超时时间                      |
| 面向文件的套接字方法 |                                                                       |
|      s.fileno()      |                          套接字的文件描述符                           |
|     s.makefile()     |                      创建与套接字关联的文件对象                       |
|       数据属性       |                                                                       |
|       s.family       |                              套接字家族                               |
|        s.type        |                              套接字类型                               |
|       s.proto        | 套接字协议                                                                      |

## 创建TCP服务器/客户端

### TCP服务器

### TCP客户端

[^1]: *AF_UNIX* 是基于文件的套接字，代表 *地址家族(address family):UNIX*，*AF_INET* 是基于网络的套接字，代表 *地址家族：因特网*， *AF_INET6* 用于底6版因特网协议(IPv6)寻址。 *SOCK_STREAM* 表示面向连接的TCP套接字， *SOCK_DGRAM* 代表无连接的UDP套接字。
